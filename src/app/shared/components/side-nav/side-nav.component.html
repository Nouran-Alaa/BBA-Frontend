<div class="flex flex-col h-full bg-gradient-to-b from-gray-900 to-gray-800 text-white">
  <!-- Logo Section -->
  <div
    class="flex items-center justify-between p-4 border-b border-gray-700"
    [class.px-2]="collapsed"
  >
    <!-- Logo and Company Name -->
    <div class="flex items-center gap-3 overflow-hidden">
      <!-- Logo Image -->
      <div class="relative flex-shrink-0">
        <img
          [src]="companyLogo || fallbackLogo"
          alt="Company Logo"
          class="w-10 h-10 rounded-lg object-cover border-2 border-gray-600 transition-transform duration-200 hover:scale-105"
          [class.w-8]="collapsed"
          [class.h-8]="collapsed"
        />

        <!-- Upload Button (Super Admin Only) -->
        <button
          *ngIf="isSuperAdmin() && !collapsed"
          (click)="logoInput.click()"
          class="absolute -bottom-1 -right-1 w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors duration-200 shadow-lg"
          title="Upload Logo"
        >
          <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 4v16m8-8H4"
            ></path>
          </svg>
        </button>

        <input
          #logoInput
          type="file"
          accept="image/*"
          (change)="uploadLogo($event)"
          class="hidden"
        />
      </div>

      <!-- Company Name -->
      <div *ngIf="!collapsed" class="transition-all duration-300">
        <h1 class="text-lg font-bold text-white">BigBrother</h1>
        <p class="text-xs text-gray-400">Analytics</p>
      </div>
    </div>

    <!-- Close Button (Mobile Only) -->
    <button
      (click)="toggleSidebar()"
      class="p-2 rounded-lg hover:bg-gray-700 transition-colors lg:hidden"
      aria-label="Close Sidebar"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        ></path>
      </svg>
    </button>
  </div>

  <!-- Dashboards Section -->
  <div class="flex-1 overflow-y-auto py-4">
    <!-- Section Title -->
    <div *ngIf="!collapsed" class="px-4 mb-3">
      <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Dashboards</h2>
    </div>

    <!-- Dashboard List -->
    <nav class="space-y-1 px-2">
      <button
        *ngFor="let dashboard of dashboards"
        (click)="selectDashboard(dashboard.id)"
        [class.bg-blue-600]="activeDashboardId === dashboard.id"
        [class.bg-transparent]="activeDashboardId !== dashboard.id"
        class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 hover:bg-gray-700 group relative"
        [class.justify-center]="collapsed"
        [title]="collapsed ? dashboard.name : ''"
      >
        <!-- Dashboard Icon -->
        <span class="text-2xl flex-shrink-0" [class.text-xl]="collapsed">
          {{ dashboard.icon || 'ðŸ“Š' }}
        </span>

        <!-- Dashboard Name -->
        <span
          *ngIf="!collapsed"
          class="text-sm font-medium text-left flex-1 truncate"
          [class.text-white]="activeDashboardId === dashboard.id"
          [class.text-gray-300]="activeDashboardId !== dashboard.id"
        >
          {{ dashboard.name }}
        </span>

        <!-- Default Badge -->
        <span
          *ngIf="dashboard.isDefault && !collapsed"
          class="px-2 py-0.5 bg-green-600 text-white text-xs rounded-full"
        >
          Default
        </span>

        <!-- Active Indicator (when collapsed) -->
        <div
          *ngIf="collapsed && activeDashboardId === dashboard.id"
          class="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-blue-400 rounded-r-full"
        ></div>
      </button>

      <!-- Add New Dashboard Button (Super Admin Only) -->
      <button
        *ngIf="isSuperAdmin()"
        (click)="addNewDashboard()"
        class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 border-2 border-dashed border-gray-600 hover:border-blue-500 hover:bg-gray-700/50 group"
        [class.justify-center]="collapsed"
        [title]="collapsed ? 'Add New Dashboard' : ''"
      >
        <!-- Plus Icon -->
        <span
          class="text-2xl flex-shrink-0 text-gray-400 group-hover:text-blue-400 transition-colors"
        >
          âž•
        </span>

        <!-- Add Text -->
        <span
          *ngIf="!collapsed"
          class="text-sm font-medium text-gray-400 group-hover:text-blue-400 transition-colors"
        >
          Add Dashboard
        </span>
      </button>
    </nav>
  </div>

  <!-- Footer Section (Optional - Settings/Help) -->
  <div class="border-t border-gray-700 p-4" [class.px-2]="collapsed">
    <button
      class="w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors"
      [class.justify-center]="collapsed"
      [title]="collapsed ? 'Settings' : ''"
    >
      <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
        ></path>
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
        ></path>
      </svg>
      <span *ngIf="!collapsed" class="text-sm text-gray-400"> Settings </span>
    </button>
  </div>
</div>
